/** @license MIT (http://opensource.org/licenses/MIT) */
!function(e,t,r){if("function"==typeof define&&"object"==typeof define.amd)define(r);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module)module.exports=r();else{if(void 0!==t[e])throw Error('cannot export module "'+e+'" in current namespace. name already in use.');t[e]=r()}}("arguejs",this,function(){"use strict";function e(e){return"boolean"==typeof e}function t(e){return e instanceof Array}function r(e){return"function"==typeof e}function a(e){return e instanceof Object}function n(e){return r(e)}function i(e){var t,r,a,n=e;if(n)for(t=arguments.length,r=1;t>r;++r)a=arguments[r],n=n.replace(RegExp("\\{"+r+"\\}","g"),a);return n}function o(e,t){return t.type===R.TAIL?!0:void 0===e?t.allowUndefined===!0:null===e?t.allowNull===!0:t.type===R.ANYTYPE?!0:M(e)===t.type||e instanceof t.type}function l(e,r){return r.type===R.TAIL?t(e):void 0===e?r.allowUndefined===!0:null===e?r.allowNull===!0:r.type===R.ANYTYPE?!0:M(e)===r.type||e instanceof r.type}function u(e){return r(e)}function f(e){return t(e)}function s(e){return M(e)===Object}function c(e){e.type===R.TAIL?void 0===e.parenthesizeTail&&(e.parenthesizeTail=w):(void 0===e.allowNull&&(e.allowNull=_),void 0===e.allowUndefined&&(e.allowUndefined=g))}function p(e,t,r){var a={idx:e,name:t,isOptional:!1,type:r};return c(a),a}function m(e,t,r){if(r.length<1)throw Error(i(N,t));var a={idx:e,name:t,isOptional:!0,type:r[0]};if(r.length>=2){if(r.length>2)throw Error(i(J,t));a.hasDefaultValue=!0,a.defaultValue=r[1]}else a.hasDefaultValue=!1;return c(a),a}function E(t,r,a){var n,o={idx:t,name:r};for(n in a)if(a.hasOwnProperty(n))switch(n){case"type":if(f(a.type)){if(a.type.length<1)throw Error(i(N,r));if(a.type.length>2)throw Error(i(J,r));o.isOptional=!0,o.type=a.type[0]}else o.isOptional=!1,o.type=a.type;break;case"defaultValue":o.hasDefaultValue=!0,o.isOptional=!0,o.defaultValue=a[n];break;case"allowUndefined":if(o.allowUndefined=a[n],!e(o.allowUndefined))throw Error(i(L,r,"allowUndefined","boolean"));break;case"allowNull":if(o.allowNull=a[n],!e(o.allowNull))throw Error(i(L,r,"allowNull","boolean"));break;case"parenthesizeTail":if(o.parenthesizeTail=a[n],!e(o.parenthesizeTail))throw Error(i(L,r,"parenthesizeTail","boolean"));break;default:throw Error(i(j,r,n))}return c(o),o}function d(e,t){var r,a,n;for(a in t)if(t.hasOwnProperty(a)){if(void 0!==r)throw Error(i(I,r.name));if(n=t[a],u(n))r=p(e,a,n);else if(f(n))r=m(e,a,n);else{if(!s(n))throw Error(i(O,a,"type"));r=E(e,a,n)}}return r}function h(e,t){if(!e.name)throw Error(i(D,e.idx));if(!k(e.name))throw Error(i(O,e.name,"name"));if(!n(e.type))throw Error(i(O,e.name,"type"));if(e.type!==R.TAIL){if(void 0!==e.parenthesizeTail)throw Error(i(x,e.name,"parenthesizeTail","only"))}else{if(void 0!==e.allowUndefined)throw Error(i(x,e.name,"allowUndefined","not"));if(void 0!==e.allowNull)throw Error(i(x,e.name,"allowNull","not"));if(e.idx!==t-1)throw Error(G)}}function y(e){var t;if(t=r(e.defaultValue)&&e.type!==Function&&e.type!==R.ANYTYPE?e.defaultValue():e.defaultValue,!l(t,e))throw Error(i(P,e.name));return t}function R(){}var _=!1,g=!1,w=!0,A="bad call: ",T=A+'type of "{1}" is invalid.',v=A+"no arguments. function call is not compatible with function specification.",U=A+"too many arguments. function call is not compatible with function specification.",S=A+"parameter specification #{1} is not an object structure.",b='parameter specification "{1}": ',P=b+"default value is not compatible to parameter type",L=b+'value of "{2}" has incorrect type (must be {3})',O=b+'"{2}" is invalid.',N=b+"type specification is missing.",V=b+"parameter with same name already defined (conflicting position in function specification: #{2})",D="parameter specification: parameter #{1} has no name",I=b+"specification contains more than one element.",x=b+'"{2}" is {3} allowed for the tail-parameter in a variadic function',G="in a variadic function the tail-parameter must be the last parameter in the function specification.",J=b+"type specification has too many elements.",j=b+'type specification contains unknown option "{2}".',F="Incompatible function call: ",z=F+'mandatory argument "{1}" has no value.',C=F+"too many arguments. {1}",Y=function(){var e=Object.prototype.toString.call(arguments);return function(t){return Object.prototype.toString.call(t)===e}}(),M=function(e){return void 0===e?void 0:null===e?null:e.constructor},k=function(){var e=/^[_a-z$]{1}[_a-z0-9$]*$/i;return function(t){return t?e.test(t):!1}}();return R.ANYTYPE=function(){},R.TAIL=function(){},R.getArguments=function(e,r){var a,n,l,u,f,s,c,p,m;if(1===arguments.length){if(!Y(arguments[0])&&!t(arguments[0]))throw Error(i(T,"_arguments"));if(!arguments[0]||arguments[0].length>0)throw Error(i(C,"no parameters defined but arguments given"));return{}}if(2!==arguments.length)throw Error(arguments.length<1?v:U);if(!t(e))throw Error(i(T,"_functionSpecification"));if(!Y(r)&&!t(r))throw Error(i(T,"_arguments"));for(a={},n={},l=e.length,u=r.length,f=0,s=r[f],c=0;l>c;++c){if(p=e[c],M(p)!==Object)throw Error(i(S,c));if(m=d(c,p),h(m,l),n.hasOwnProperty(m.name))throw Error(i(V,m.name,c));if(n[m.name]=m,u>f&&o(s,m)){if(m.type===R.TAIL){a[m.name]=f!==u-1?Array.prototype.slice.call(r,f):!t(s)||m.parenthesizeTail?[s]:s,f=u;break}a[m.name]=s,++f,u>f&&(s=r[f])}else{if(!m.isOptional)throw Error(i(z,m.name));m.hasDefaultValue&&(a[m.name]=y(m))}}if(u>f)throw Error(i(C,"there are arguments left but all parameters are processed."));return a},R.__export_internals__=function(B){var $,W,X,H,Z,q,K;if(void 0!==B&&!(B instanceof R))throw Error(A+"_arguejs type mismatch");$={config:{ARGUEJS_PRODUCTION_READY:!1},$:{defaults:{DEFAULT_VALUE_FOR_ALLOWNULL:_,DEFAULT_VALUE_FOR_ALLOWUNDEFINED:g,DEFAULT_VALUE_FOR_PARENTHESIZETAIL:w},errorTexts:{ERR_BADCALL_PREFIX:A,ERR_BADCALL_InvalidTypeOfArgument:T,ERR_BADCALL_NoArguments:v,ERR_BADCALL_TooManyArguments:U,ERR_BADCALL_InvalidTypeOfParameter:S,ERR_ARGUEJS_PREFIX:b,ERR_ARGUEJS_DefaultValueHasIncompatibleType:P,ERR_ARGUEJS_InvalidTypeOfValue:L,ERR_ARGUEJS_InvalidValue:O,ERR_ARGUEJS_MissingTypeSpecification:N,ERR_ARGUEJS_ParameterAlreadyDefined:V,ERR_ARGUEJS_ParameterSpecificationWithoutName:D,ERR_ARGUEJS_ParameterWithTooManyElements:I,ERR_ARGUEJS_ParameterXYZAllowedInVariadicFunction:x,ERR_ARGUEJS_TailParameterMustBeLastPastparameter:G,ERR_ARGUEJS_TypeSpecificationHasTooManyElements:J,ERR_ARGUEJS_UnknownTypeSpecificationOption:j,ERR_ARGUEJS_GetParameters_PREFIX:F,ERR_ARGUEJS_GetParameters_MandatoryParameterWithoutValue:z,ERR_ARGUEJS_GetParameters_TooManyArguments:C,asRegExp:{}},isBoolean:e,isArray:t,isFunction:r,isObject:a,isArguments:Y,isType:n,getType:M,formatText:i,validateParameterName:k,isCompatibleArgumentValue:o,isCompatibleDefaultValue:l,isSimpleMandatoryTypeSpecification:u,isSimpleOptionalTypeSpecification:f,isComplexTypeSpecification:s,ensureSomeParameterDefaultValues:c,createSimpleMandatoryParameter:p,createSimpleOptionalParameter:m,createComplexParameter:E,createParameter:d,validateParameter:h,getDefaultValue:y},ArgueJS:{},_arguejs:B?void 0:{}},W=/\./g,X=/\(/g,H=/\)/g,Z=/\{[1-9][0-9]?\}/g,q=$.$.errorTexts;for(K in q)q.hasOwnProperty(K)&&"asRegExp"!==K&&(q.asRegExp[K]=RegExp("^"+q[K].replace(W,"\\.").replace(X,"\\(").replace(H,"\\)").replace(Z,".*")+"$"));return $},R});