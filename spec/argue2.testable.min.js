/** @license MIT (http://opensource.org/licenses/MIT) */
if("function"!=typeof define)var define=require("amdefine")(module);define(function(){"use strict";return function(e){return e()}(function(){function e(e){return"boolean"==typeof e}function r(e){return e instanceof Array}function t(e){return"function"==typeof e}function n(e){return e instanceof Object}function i(e){return t(e)}function o(e){var r,t,n,i=e;if(i)for(r=arguments.length,t=1;r>t;++t)n=arguments[t],i=i.replace(RegExp("\\{"+t+"\\}","g"),n);return i}function a(e,r,t,n){return r===u.TAIL?!0:void 0===e?t===!0:null===e?n===!0:r===u.ANYTYPE?!0:D(e)===r||e instanceof r}function f(e,t,n,i){return t===u.TAIL?r(e):void 0===e?n===!0:null===e?i===!0:t===u.ANYTYPE?!0:D(e)===t||e instanceof t}function l(e,r){return t(r)?e===Function?r:e===u.ANYTYPE?r:r():r}function u(){}var c=!1,s=!1,E=!0,p="bad call: ",m=p+'type of "{1}" is invalid.',R=p+"no arguments. function call is not compatible with function specification.",h=p+"too many arguments. function call is not compatible with function specification.",_=p+"parameter specification #{1} is not an object structure.",d='parameter specification "{1}": ',A=d+"default value is not compatible to parameter type",g=d+'value of "{2}" has incorrect type (must be {3})',y=d+'"{2}" is invalid.',w=d+"type specification is missing.",v=d+"parameter with same name already defined (conflicting position in function specification: #{2})",T="parameter specification: parameter #{1} has no name",L=d+"specification contains more than one element.",U=d+'"{2}" is {3} allowed for the tail-parameter in a variadic function',b="in a variadic function the tail-parameter must be the last parameter in the function specification.",P=d+"type specification has too many elements.",S=d+'type specification contains unknown option "{2}".',O="Incompatible function call: ",G=O+'mandatory argument "{1}" has no value.',I=O+"too many arguments. {1}",J=function(){var e=Object.prototype.toString.call(arguments);return function(r){return Object.prototype.toString.call(r)===e}}(),D=function(e){return void 0===e?void 0:null===e?null:e.constructor},N=function(){var e=/^[_a-z$]{1}[_a-z0-9$]*$/i;return function(r){return r?e.test(r):!1}}();return u.ANYTYPE=function(){},u.TAIL=function(){},u.getArguments=function(p,d){var O,F,V,Y,x,j,k,C,B,M,$,z,W,X,H,Z,q,K,Q,er,rr;if(1===arguments.length){if(d=arguments[0],!d||d.length>0)throw Error(o(I,"no parameters defined but arguments given"));return{}}if(2!==arguments.length)throw Error(arguments.length<1?R:h);if(!r(p))throw Error(o(m,"_functionSpecification"));if(!J(d)&&!r(d))throw Error(o(m,"_arguments"));for(O=p.length,F={},V={},z=d.length,W=0,X=d[W],H=0;O>H;++H){if(Z=p[H],D(Z)!==Object)throw Error(o(_,H));Y=void 0,x=void 0,j=void 0,k=void 0,C=void 0,B=void 0,M=void 0,$=void 0;for(q in Z)if(Z.hasOwnProperty(q)){if(Y)throw Error(o(L,Y));if(Y=q,!N(Y))throw Error(o(y,Y,"name"));if(K=Z[q],t(K))j=!1,x=K;else if(r(K)){if(K.length<1)throw Error(o(w,Y));if(j=!0,x=K[0],K.length>=2){if(K.length>2)throw Error(o(P,Y));k=!0,C=K[1]}}else{if(!n(K))throw Error(o(y,Y,"type"));for(Q in K)if(K.hasOwnProperty(Q))switch(Q){case"type":if(r(K.type)){if(K.type.length<1)throw Error(o(w,Y));if(K.type.length>2)throw Error(o(P,Y));j=!0,x=K.type[0]}else j=!1,x=K.type;break;case"defaultValue":k=!0,j=!0,C=K[Q];break;case"allowUndefined":if(B=K[Q],!e(B))throw Error(o(g,Y,"allowUndefined","boolean"));break;case"allowNull":if(M=K[Q],!e(M))throw Error(o(g,Y,"allowNull","boolean"));break;case"parenthesizeTail":if($=K[Q],!e($))throw Error(o(g,Y,"parenthesizeTail","boolean"));break;default:throw Error(o(S,Y,Q))}}}if(!Y)throw Error(o(T,H));if(V.hasOwnProperty(Y))throw Error(o(v,Y,H));if(V[Y]=!0,!i(x))throw Error(o(y,Y,"type"));if(x!==u.TAIL){if(void 0!==$)throw Error(o(U,Y,"parenthesizeTail","only"));void 0===B&&(B=s),void 0===M&&(M=c)}else{if(void 0!==B)throw Error(o(U,Y,"allowUndefined","not"));if(void 0!==M)throw Error(o(U,Y,"allowNull","not"));if(H!==O-1)throw Error(b);void 0===$&&($=E)}if(z>W&&a(X,x,B,M)){if(x===u.TAIL){if(++W<z){er=[X];do er[er.length]=d[W];while(++W<z);F[Y]=er}else F[Y]=!r(X)||$?[X]:X;W=z;break}F[Y]=X,++W,z>W&&(X=d[W])}else{if(!j)throw Error(o(G,Y));if(k){if(rr=l(x,C),!f(rr,x,B,M))throw Error(o(A,Y));F[Y]=rr}}}if(z>W)throw Error(o(I,"there are arguments left but all parameters are processed."));return F},u.__export_internals__=function(F){var V,Y,x,j,k,C,B;if(void 0!==F&&!(F instanceof u))throw Error(p+"_arguejs type mismatch");V={config:{ARGUEJS_PRODUCTION_READY:!1},$:{defaults:{DEFAULT_VALUE_FOR_ALLOWNULL:c,DEFAULT_VALUE_FOR_ALLOWUNDEFINED:s,DEFAULT_VALUE_FOR_PARENTHESIZETAIL:E},errorTexts:{ERR_BADCALL_PREFIX:p,ERR_BADCALL_InvalidTypeOfArgument:m,ERR_BADCALL_NoArguments:R,ERR_BADCALL_TooManyArguments:h,ERR_BADCALL_InvalidTypeOfParameter:_,ERR_ARGUEJS_PREFIX:d,ERR_ARGUEJS_DefaultValueHasIncompatibleType:A,ERR_ARGUEJS_InvalidTypeOfValue:g,ERR_ARGUEJS_InvalidValue:y,ERR_ARGUEJS_MissingTypeSpecification:w,ERR_ARGUEJS_ParameterAlreadyDefined:v,ERR_ARGUEJS_ParameterSpecificationWithoutName:T,ERR_ARGUEJS_ParameterWithTooManyElements:L,ERR_ARGUEJS_ParameterXYZAllowedInVariadicFunction:U,ERR_ARGUEJS_TailParameterMustBeLastPastparameter:b,ERR_ARGUEJS_TypeSpecificationHasTooManyElements:P,ERR_ARGUEJS_UnknownTypeSpecificationOption:S,ERR_ARGUEJS_GetParameters_PREFIX:O,ERR_ARGUEJS_GetParameters_MandatoryParameterWithoutValue:G,ERR_ARGUEJS_GetParameters_TooManyArguments:I,asRegExp:{}},isBoolean:e,isArray:r,isFunction:t,isObject:n,isArguments:J,isType:i,getType:D,formatText:o,validateParameterName:N,isCompatibleArgumentValue:a,isCompatibleDefaultValue:f,getDefaultValue:l},ArgueJS:{},_arguejs:F?void 0:{}},Y=/\./g,x=/\(/g,j=/\)/g,k=/\{[1-9][0-9]?\}/g,C=V.$.errorTexts;for(B in C)C.hasOwnProperty(B)&&"asRegExp"!==B&&(C.asRegExp[B]=RegExp("^"+C[B].replace(Y,"\\.").replace(x,"\\(").replace(j,"\\)").replace(k,".*")+"$"));return V},u})});