/** @license MIT (http://opensource.org/licenses/MIT) */
if("function"!=typeof define)var define=require("amdefine")(module);define(function(){"use strict";return function(e){return e()}(function(){function e(e){return"boolean"==typeof e}function r(e){return e instanceof Array}function t(e){return"function"==typeof e}function n(e){return e instanceof Object}function i(e){return t(e)}function o(e){var r,t,n,i=e;if(i)for(r=arguments.length,t=1;r>t;++t)n=arguments[t],i=i.replace(RegExp("\\{"+t+"\\}","g"),n);return i}function a(e,t,n,i,o){if(o){if(t===f.TAIL)return r(e);if(void 0===e)return n===!0;if(null===e)return i===!0}else{if(t===f.TAIL)return!0;if(void 0===e)return n===!0;if(null===e)return i===!0}return t===f.ANYTYPE?!0:G(e)===t||e instanceof t}function f(){}var l=!1,u=!1,c=!0,s="bad call: ",E=s+'type of "{1}" is invalid.',p=s+"no arguments. function call is not compatible with function specification.",m=s+"too many arguments. function call is not compatible with function specification.",R=s+"parameter specification #{1} is not an object structure.",h='parameter specification "{1}": ',_=h+"default value is not compatible to parameter type",d=h+'value of "{2}" has incorrect type (must be {3})',A=h+'"{2}" is invalid.',g=h+"type specification is missing.",y=h+"parameter with same name already defined (conflicting position in function specification: #{2})",w="parameter specification: parameter #{1} has no name",v=h+"specification contains more than one element.",T=h+'"{2}" is {3} allowed for the tail-parameter in a variadic function',L="in a variadic function the tail-parameter must be the last parameter in the function specification.",U=h+"type specification has too many elements.",P=h+'type specification contains unknown option "{2}".',b="Incompatible function call: ",S=b+'mandatory argument "{1}" has no value.',O=b+"too many arguments. {1}",I=function(){var e=Object.prototype.toString.call(arguments);return function(r){return Object.prototype.toString.call(r)===e}}(),G=function(e){return void 0===e?void 0:null===e?null:e.constructor},J=function(){var e=/^[_a-z$]{1}[_a-z0-9$]*$/i;return function(r){return r?e.test(r):!1}}();return f.ANYTYPE=function(){},f.TAIL=function(){},f.getArguments=function(s,h){var b,N,D,F,V,x,j,k,M,Y,B,C,$,z,W,X,H,Z,q,K,Q;if(1===arguments.length){if(h=arguments[0],!h||h.length>0)throw Error(o(O,"no parameters defined but arguments given"));return{}}if(2!=arguments.length)throw Error(arguments.length<1?p:m);if(!r(s))throw Error(o(E,"_functionSpecification"));if(!I(h)&&!r(h))throw Error(o(E,"_arguments"));for(b=s.length,N={},D={},C=h.length,$=0,z=h[$],W=0;b>W;++W){if(X=s[W],G(X)!==Object)throw Error(o(R,W));F=void 0,V=void 0,x=void 0,j=void 0,k=void 0,M=void 0,Y=void 0,B=void 0;for(H in X)if(X.hasOwnProperty(H)){if(F)throw Error(o(v,F));if(F=H,!J(F))throw Error(o(A,F,"name"));if(Z=X[H],t(Z))x=!1,V=Z;else if(r(Z)){if(Z.length<1)throw Error(o(g,F));if(x=!0,V=Z[0],Z.length>=2){if(Z.length>2)throw Error(o(U,F));j=!0,k=Z[1]}}else{if(!n(Z))throw Error(o(A,F,"type"));for(q in Z)if(Z.hasOwnProperty(q))switch(q){case"type":if(r(Z.type)){if(Z.type.length<1)throw Error(o(g,F));if(Z.type.length>2)throw Error(o(U,F));x=!0,V=Z.type[0]}else x=!1,V=Z.type;break;case"defaultValue":j=!0,x=!0,k=Z[q];break;case"allowUndefined":if(M=Z[q],!e(M))throw Error(o(d,F,"allowUndefined","boolean"));break;case"allowNull":if(Y=Z[q],!e(Y))throw Error(o(d,F,"allowNull","boolean"));break;case"parenthesizeTail":if(B=Z[q],!e(B))throw Error(o(d,F,"parenthesizeTail","boolean"));break;default:throw Error(o(P,F,q))}}}if(!F)throw Error(o(w,W));if(D.hasOwnProperty(F))throw Error(o(y,F,W));if(D[F]=!0,!i(V))throw Error(o(A,F,"type"));if(V!==f.TAIL){if(void 0!==B)throw Error(o(T,F,"parenthesizeTail","only"));void 0===M&&(M=u),void 0===Y&&(Y=l)}else{if(void 0!==M)throw Error(o(T,F,"allowUndefined","not"));if(void 0!==Y)throw Error(o(T,F,"allowNull","not"));if(W!=b-1)throw Error(L);void 0===B&&(B=c)}if(C>$&&a(z,V,M,Y,!1)){if(V===f.TAIL){if(++$<C){K=[z];do K[K.length]=h[$];while(++$<C);N[F]=K}else N[F]=!r(z)||B?[z]:z;$=C;break}N[F]=z,++$,C>$&&(z=h[$])}else{if(!x)throw Error(o(S,F));if(j){if(Q=V!==Function&&V!==f.ANYTYPE&&t(k)?k():k,!a(Q,V,M,Y,!0))throw Error(o(_,F));N[F]=Q}}}if(C>$)throw Error(o(O,"there are arguments left but all parameters are processed."));return N},f.__export_internals__=function(N){var D,F,V,x,j,k,M;if(void 0!==N&&!(N instanceof f))throw Error(s+"_arguejs type mismatch");D={config:{ARGUEJS_PRODUCTION_READY:!1},$:{defaults:{DEFAULT_OPTION_VALUE_ALLOWNULL:l,DEFAULT_OPTION_VALUE_ALLOWUNDEFINED:u,DEFAULT_OPTION_VALUE_PARAMETERPARENTHESIZETAIL:c},errorTexts:{ERR_BADCALL_PREFIX:s,ERR_BADCALL_InvalidTypeOfArgument:E,ERR_BADCALL_NoArguments:p,ERR_BADCALL_TooManyArguments:m,ERR_BADCALL_InvalidTypeOfParameter:R,ERR_ARGUEJS_PREFIX:h,ERR_ARGUEJS_DefaultValueHasIncompatibleType:_,ERR_ARGUEJS_InvalidTypeOfValue:d,ERR_ARGUEJS_InvalidValue:A,ERR_ARGUEJS_MissingTypeSpecification:g,ERR_ARGUEJS_ParameterAlreadyDefined:y,ERR_ARGUEJS_ParameterSpecificationWithoutName:w,ERR_ARGUEJS_ParameterWithTooManyElements:v,ERR_ARGUEJS_ParameterXYZAllowedInVariadicFunction:T,ERR_ARGUEJS_TailParameterMustBeLastPastparameter:L,ERR_ARGUEJS_TypeSpecificationHasTooManyElements:U,ERR_ARGUEJS_UnknownTypeSpecificationOption:P,ERR_ARGUEJS_GetParameters_PREFIX:b,ERR_ARGUEJS_GetParameters_MandatoryParameterWithoutValue:S,ERR_ARGUEJS_GetParameters_TooManyArguments:O,asRegExp:{}},isBoolean:e,isArray:r,isFunction:t,isObject:n,isArguments:I,isType:i,getType:G,formatText:o,validateParameterName:J,isCompatibleValue:a},ArgueJS:{},_arguejs:N?void 0:{}},F=/\./g,V=/\(/g,x=/\)/g,j=/\{[1-9][0-9]?\}/g,k=D.$.errorTexts;for(M in k)k.hasOwnProperty(M)&&"asRegExp"!==M&&(k.asRegExp[M]=RegExp("^"+k[M].replace(F,"\\.").replace(V,"\\(").replace(x,"\\)").replace(j,".*")+"$"));return D},f})});