/** @license MIT (http://opensource.org/licenses/MIT) */
if("function"!=typeof define)var define=require("amdefine")(module);define(function(){"use strict";return function(e){return e()}(function(){function e(e){return"boolean"==typeof e}function t(e){return e instanceof Array}function a(e){return"function"==typeof e}function n(e){return e instanceof Object}function r(e){return a(e)}function i(e){var t,a,n,r=e;if(r)for(t=arguments.length,a=1;t>a;++a)n=arguments[a],r=r.replace(RegExp("\\{"+a+"\\}","g"),n);return r}function o(e,t){return t.type===_.TAIL?!0:void 0===e?t.allowUndefined===!0:null===e?t.allowNull===!0:t.type===_.ANYTYPE?!0:j(e)===t.type||e instanceof t.type}function l(e,a){return a.type===_.TAIL?t(e):void 0===e?a.allowUndefined===!0:null===e?a.allowNull===!0:a.type===_.ANYTYPE?!0:j(e)===a.type||e instanceof a.type}function u(e){return a(e)}function c(e){return t(e)}function f(e){return j(e)===Object}function s(e){e.type===_.TAIL?void 0===e.parenthesizeTail&&(e.parenthesizeTail=h):(void 0===e.allowNull&&(e.allowNull=A),void 0===e.allowUndefined&&(e.allowUndefined=g))}function p(e,t,a){var n={idx:e,name:t,isOptional:!1,type:a};return s(n),n}function m(e,t,a){var n={idx:e,name:t,isOptional:!0,type:a[0]};return a.length>=2?(n.hasDefaultValue=!0,n.defaultValue=a[1]):n.hasDefaultValue=!1,s(n),n}function E(e,t,a){var n,r={idx:e,name:t};for(n in a)if(a.hasOwnProperty(n))switch(n){case"type":c(a.type)?(r.isOptional=!0,r.type=a.type[0]):(r.isOptional=!1,r.type=a.type);break;case"defaultValue":r.hasDefaultValue=!0,r.isOptional=!0,r.defaultValue=a[n];break;case"allowUndefined":r.allowUndefined=a[n];break;case"allowNull":r.allowNull=a[n];break;case"parenthesizeTail":r.parenthesizeTail=a[n];break;default:throw Error(i(F,t,n))}return s(r),r}function R(e,t){var a,n,r;for(n in t)if(t.hasOwnProperty(n)){if(r=t[n],u(r)){a=p(e,n,r);break}if(c(r)){a=m(e,n,r);break}if(f(r)){a=E(e,n,r);break}throw Error(i(O,n,"type"))}return a}function y(e,t){}function d(e){var t;if(t=a(e.defaultValue)&&e.type!==Function&&e.type!==_.ANYTYPE?e.defaultValue():e.defaultValue,!l(t,e))throw Error(i(L,e.name));return t}function _(){}var A=!1,g=!1,h=!0,T="bad call: ",v=T+'type of "{1}" is invalid.',S=T+"no arguments. function call is not compatible with function specification.",U=T+"too many arguments. function call is not compatible with function specification.",w=T+"parameter specification #{1} is not an object structure.",P='parameter specification "{1}": ',L=P+"default value is not compatible to parameter type",b=P+'value of "{2}" has incorrect type (must be {3})',O=P+'"{2}" is invalid.',V=P+"type specification is missing.",D=P+"parameter with same name already defined (conflicting position in function specification: #{2})",G="parameter specification: parameter #{1} has no name",I=P+"specification contains more than one element.",N=P+'"{2}" is {3} allowed for the tail-parameter in a variadic function',J="in a variadic function the tail-parameter must be the last parameter in the function specification.",x=P+"type specification has too many elements.",F=P+'type specification contains unknown option "{2}".',k="Incompatible function call: ",C=k+'mandatory argument "{1}" has no value.',Y=k+"too many arguments. {1}",M=function(){var e=Object.prototype.toString.call(arguments);return function(t){return Object.prototype.toString.call(t)===e}}(),j=function(e){return void 0===e?void 0:null===e?null:e.constructor},z=function(){var e=/^[_a-z$]{1}[_a-z0-9$]*$/i;return function(t){return t?e.test(t):!1}}();return _.ANYTYPE=function(){},_.TAIL=function(){},_.getArguments=function(e,a){var n,r,l,u,c,f,s,p,m;if(1===arguments.length){if(!M(arguments[0])&&!t(arguments[0]))throw Error(i(v,"_arguments"));if(!arguments[0]||arguments[0].length>0)throw Error(i(Y,"no parameters defined but arguments given"));return{}}for(n={},r={},l=e.length,u=a.length,c=0,f=a[c],s=0;l>s;++s)if(p=e[s],m=R(s,p),u>c&&o(f,m)){if(m.type===_.TAIL){n[m.name]=c!==u-1?Array.prototype.slice.call(a,c):!t(f)||m.parenthesizeTail?[f]:f,c=u;break}n[m.name]=f,++c,u>c&&(f=a[c])}else{if(!m.isOptional)throw Error(i(C,m.name));m.hasDefaultValue&&(n[m.name]=d(m))}if(u>c)throw Error(i(Y,"there are arguments left but all parameters are processed."));return n},_.__export_internals__=function(B){var $,W,X,H,Z,q,K;if(void 0!==B&&!(B instanceof _))throw Error(T+"_arguejs type mismatch");$={config:{ARGUEJS_PRODUCTION_READY:!0},$:{defaults:{DEFAULT_VALUE_FOR_ALLOWNULL:A,DEFAULT_VALUE_FOR_ALLOWUNDEFINED:g,DEFAULT_VALUE_FOR_PARENTHESIZETAIL:h},errorTexts:{ERR_BADCALL_PREFIX:T,ERR_BADCALL_InvalidTypeOfArgument:v,ERR_BADCALL_NoArguments:S,ERR_BADCALL_TooManyArguments:U,ERR_BADCALL_InvalidTypeOfParameter:w,ERR_ARGUEJS_PREFIX:P,ERR_ARGUEJS_DefaultValueHasIncompatibleType:L,ERR_ARGUEJS_InvalidTypeOfValue:b,ERR_ARGUEJS_InvalidValue:O,ERR_ARGUEJS_MissingTypeSpecification:V,ERR_ARGUEJS_ParameterAlreadyDefined:D,ERR_ARGUEJS_ParameterSpecificationWithoutName:G,ERR_ARGUEJS_ParameterWithTooManyElements:I,ERR_ARGUEJS_ParameterXYZAllowedInVariadicFunction:N,ERR_ARGUEJS_TailParameterMustBeLastPastparameter:J,ERR_ARGUEJS_TypeSpecificationHasTooManyElements:x,ERR_ARGUEJS_UnknownTypeSpecificationOption:F,ERR_ARGUEJS_GetParameters_PREFIX:k,ERR_ARGUEJS_GetParameters_MandatoryParameterWithoutValue:C,ERR_ARGUEJS_GetParameters_TooManyArguments:Y,asRegExp:{}},isBoolean:e,isArray:t,isFunction:a,isObject:n,isArguments:M,isType:r,getType:j,formatText:i,validateParameterName:z,isCompatibleArgumentValue:o,isCompatibleDefaultValue:l,isSimpleMandatoryTypeSpecification:u,isSimpleOptionalTypeSpecification:c,isComplexTypeSpecification:f,ensureSomeParameterDefaultValues:s,createSimpleMandatoryParameter:p,createSimpleOptionalParameter:m,createComplexParameter:E,createParameter:R,validateParameter:y,getDefaultValue:d},ArgueJS:{},_arguejs:B?void 0:{}},W=/\./g,X=/\(/g,H=/\)/g,Z=/\{[1-9][0-9]?\}/g,q=$.$.errorTexts;for(K in q)q.hasOwnProperty(K)&&"asRegExp"!==K&&(q.asRegExp[K]=RegExp("^"+q[K].replace(W,"\\.").replace(X,"\\(").replace(H,"\\)").replace(Z,".*")+"$"));return $},_})});