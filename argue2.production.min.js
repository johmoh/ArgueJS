/** @license MIT (http://opensource.org/licenses/MIT) */
if("function"!=typeof define)var define=require("amdefine")(module);define(function(){"use strict";return function(e){return e()}(function(){function e(e){return e instanceof Array}function r(e){return"function"==typeof e}function n(e){return e instanceof Object}function t(e){var r,n,t,i=e;if(i)for(r=arguments.length,n=1;r>n;++n)t=arguments[n],i=i.replace(RegExp("\\{"+n+"\\}","g"),t);return i}function i(r,n,t,i,a){if(a){if(n===o.TAIL)return e(r);if(void 0===r)return t===!0;if(null===r)return i===!0}else{if(n===o.TAIL)return!0;if(void 0===r)return t===!0;if(null===r)return i===!0}return n===o.ANYTYPE?!0:h(r)===n||r instanceof n}function o(){}{var a=!1,u=!1,f=!0,c='parameter specification "{1}": ',l=c+"default value is not compatible to parameter type",s=c+'"{2}" is invalid.',d=c+'type specification contains unknown option "{2}".',p="Incompatible function call: ",v=p+'mandatory argument "{1}" has no value.',g=p+"too many arguments. {1}",h=(function(){var e=Object.prototype.toString.call(arguments);return function(r){return Object.prototype.toString.call(r)===e}}(),function(e){return void 0===e?void 0:null===e?null:e.constructor});!function(){var e=/^[_a-z$]{1}[_a-z0-9$]*$/i;return function(r){return r?e.test(r):!1}}()}return o.ANYTYPE=function(){},o.TAIL=function(){},o.getArguments=function(c,p){var h,m,y,b,w,A,E,T,k,I,Y,L,O,P,N,j,z,$,S,_,q;if(1===arguments.length){if(p=arguments[0],!p||p.length>0)throw Error(t(g,"no parameters defined but arguments given"));return{}}for(h=c.length,m={},y={},L=p.length,O=0,P=p[O],N=0;h>N;++N){j=c[N],b=void 0,w=void 0,A=void 0,E=void 0,T=void 0,k=void 0,I=void 0,Y=void 0;for(z in j)if(j.hasOwnProperty(z))if(b=z,$=j[z],r($))A=!1,w=$;else if(e($))A=!0,w=$[0],$.length>=2&&(E=!0,T=$[1]);else{if(!n($))throw Error(t(s,b,"type"));for(S in $)if($.hasOwnProperty(S))switch(S){case"type":e($.type)?(A=!0,w=$.type[0]):(A=!1,w=$.type);break;case"defaultValue":E=!0,A=!0,T=$[S];break;case"allowUndefined":k=$[S];break;case"allowNull":I=$[S];break;case"parenthesizeTail":Y=$[S];break;default:throw Error(t(d,b,S))}}if(w!==o.TAIL?(void 0===k&&(k=u),void 0===I&&(I=a)):void 0===Y&&(Y=f),L>O&&i(P,w,k,I,!1)){if(w===o.TAIL){if(++O<L){_=[P];do _[_.length]=p[O];while(++O<L);m[b]=_}else m[b]=!e(P)||Y?[P]:P;O=L;break}m[b]=P,++O,L>O&&(P=p[O])}else{if(!A)throw Error(t(v,b));if(E){if(q=w!==Function&&w!==o.ANYTYPE&&r(T)?T():T,!i(q,w,k,I,!0))throw Error(t(l,b));m[b]=q}}}if(L>O)throw Error(t(g,"there are arguments left but all parameters are processed."));return m},o})});