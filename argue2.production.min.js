/** @license MIT (http://opensource.org/licenses/MIT) */
!function(e,t,n){if("function"==typeof define&&"object"==typeof define.amd)define(n);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module)module.exports=n();else{if(void 0!==t[e])throw Error('cannot export module "'+e+'" in current namespace. name already in use.');t[e]=n()}}("arguejs",this,function(){"use strict";function e(e){return e instanceof Array}function t(e){return"function"==typeof e}function n(e){var t,n,r,a=e;if(a)for(t=arguments.length,n=1;t>n;++n)r=arguments[n],a=a.replace(RegExp("\\{"+n+"\\}","g"),r);return a}function r(e,t){return t.type===y.TAIL?!0:void 0===e?t.allowUndefined===!0:null===e?t.allowNull===!0:t.type===y.ANYTYPE?!0:Y(e)===t.type||e instanceof t.type}function a(t,n){return n.type===y.TAIL?e(t):void 0===t?n.allowUndefined===!0:null===t?n.allowNull===!0:n.type===y.ANYTYPE?!0:Y(t)===n.type||t instanceof n.type}function o(e){return t(e)}function i(t){return e(t)}function l(e){return Y(e)===Object}function u(e){e.type===y.TAIL?void 0===e.parenthesizeTail&&(e.parenthesizeTail=g):(void 0===e.allowNull&&(e.allowNull=m),void 0===e.allowUndefined&&(e.allowUndefined=h))}function f(e,t,n){var r={idx:e,name:t,isOptional:!1,type:n};return u(r),r}function c(e,t,n){var r={idx:e,name:t,isOptional:!0,type:n[0]};return n.length>=2?(r.hasDefaultValue=!0,r.defaultValue=n[1]):r.hasDefaultValue=!1,u(r),r}function p(e,t,r){var a,o={idx:e,name:t};for(a in r)if(r.hasOwnProperty(a))switch(a){case"type":i(r.type)?(o.isOptional=!0,o.type=r.type[0]):(o.isOptional=!1,o.type=r.type);break;case"defaultValue":o.hasDefaultValue=!0,o.isOptional=!0,o.defaultValue=r[a];break;case"allowUndefined":o.allowUndefined=r[a];break;case"allowNull":o.allowNull=r[a];break;case"parenthesizeTail":o.parenthesizeTail=r[a];break;default:throw Error(n(A,t,a))}return u(o),o}function s(e,t){var r,a,u;for(a in t)if(t.hasOwnProperty(a)){if(u=t[a],o(u)){r=f(e,a,u);break}if(i(u)){r=c(e,a,u);break}if(l(u)){r=p(e,a,u);break}throw Error(n(E,a,"type"))}return r}function d(e){var r;if(r=t(e.defaultValue)&&e.type!==Function&&e.type!==y.ANYTYPE?e.defaultValue():e.defaultValue,!a(r,e))throw Error(n(T,e.name));return r}function y(){}{var m=!1,h=!1,g=!0,w="bad call: ",v=w+'type of "{1}" is invalid.',b='parameter specification "{1}": ',T=b+"default value is not compatible to parameter type",E=b+'"{2}" is invalid.',A=b+'type specification contains unknown option "{2}".',O="Incompatible function call: ",k=O+'mandatory argument "{1}" has no value.',N=O+"too many arguments. {1}",V=function(){var e=Object.prototype.toString.call(arguments);return function(t){return Object.prototype.toString.call(t)===e}}(),Y=function(e){return void 0===e?void 0:null===e?null:e.constructor};!function(){var e=/^[_a-z$]{1}[_a-z0-9$]*$/i;return function(t){return t?e.test(t):!1}}()}return y.ANYTYPE=function(){},y.TAIL=function(){},y.getArguments=function(t,a){var o,i,l,u,f,c,p,m,h;if(1===arguments.length){if(!V(arguments[0])&&!e(arguments[0]))throw Error(n(v,"_arguments"));if(!arguments[0]||arguments[0].length>0)throw Error(n(N,"no parameters defined but arguments given"));return{}}for(o={},i={},l=t.length,u=a.length,f=0,c=a[f],p=0;l>p;++p)if(m=t[p],h=s(p,m),u>f&&r(c,h)){if(h.type===y.TAIL){o[h.name]=f!==u-1?Array.prototype.slice.call(a,f):!e(c)||h.parenthesizeTail?[c]:c,f=u;break}o[h.name]=c,++f,u>f&&(c=a[f])}else{if(!h.isOptional)throw Error(n(k,h.name));h.hasDefaultValue&&(o[h.name]=d(h))}if(u>f)throw Error(n(N,"there are arguments left but all parameters are processed."));return o},y});