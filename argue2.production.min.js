/** @license MIT (http://opensource.org/licenses/MIT) */
if("function"!=typeof define)var define=require("amdefine")(module);define(function(){"use strict";return function(e){return e()}(function(){function e(e){return e instanceof Array}function n(e){return"function"==typeof e}function t(e){return e instanceof Object}function r(e){var n,t,r,i=e;if(i)for(n=arguments.length,t=1;n>t;++t)r=arguments[t],i=i.replace(RegExp("\\{"+t+"\\}","g"),r);return i}function i(e,n,t,r){return n===u.TAIL?!0:void 0===e?t===!0:null===e?r===!0:n===u.ANYTYPE?!0:y(e)===n||e instanceof n}function o(n,t,r,i){return t===u.TAIL?e(n):void 0===n?r===!0:null===n?i===!0:t===u.ANYTYPE?!0:y(n)===t||n instanceof t}function a(e,t){return n(t)?e===Function?t:e===u.ANYTYPE?t:t():t}function u(){}{var f=!1,c=!1,l=!0,s='parameter specification "{1}": ',d=s+"default value is not compatible to parameter type",p=s+'"{2}" is invalid.',v=s+'type specification contains unknown option "{2}".',g="Incompatible function call: ",h=g+'mandatory argument "{1}" has no value.',m=g+"too many arguments. {1}",y=(function(){var e=Object.prototype.toString.call(arguments);return function(n){return Object.prototype.toString.call(n)===e}}(),function(e){return void 0===e?void 0:null===e?null:e.constructor});!function(){var e=/^[_a-z$]{1}[_a-z0-9$]*$/i;return function(n){return n?e.test(n):!1}}()}return u.ANYTYPE=function(){},u.TAIL=function(){},u.getArguments=function(s,g){var y,b,w,A,E,T,Y,k,I,P,L,N,O,j,z,$,S,_,q,x,F;if(1===arguments.length){if(g=arguments[0],!g||g.length>0)throw Error(r(m,"no parameters defined but arguments given"));return{}}for(y=s.length,b={},w={},N=g.length,O=0,j=g[O],z=0;y>z;++z){$=s[z],A=void 0,E=void 0,T=void 0,Y=void 0,k=void 0,I=void 0,P=void 0,L=void 0;for(S in $)if($.hasOwnProperty(S))if(A=S,_=$[S],n(_))T=!1,E=_;else if(e(_))T=!0,E=_[0],_.length>=2&&(Y=!0,k=_[1]);else{if(!t(_))throw Error(r(p,A,"type"));for(q in _)if(_.hasOwnProperty(q))switch(q){case"type":e(_.type)?(T=!0,E=_.type[0]):(T=!1,E=_.type);break;case"defaultValue":Y=!0,T=!0,k=_[q];break;case"allowUndefined":I=_[q];break;case"allowNull":P=_[q];break;case"parenthesizeTail":L=_[q];break;default:throw Error(r(v,A,q))}}if(E!==u.TAIL?(void 0===I&&(I=c),void 0===P&&(P=f)):void 0===L&&(L=l),N>O&&i(j,E,I,P)){if(E===u.TAIL){if(++O<N){x=[j];do x[x.length]=g[O];while(++O<N);b[A]=x}else b[A]=!e(j)||L?[j]:j;O=N;break}b[A]=j,++O,N>O&&(j=g[O])}else{if(!T)throw Error(r(h,A));if(Y){if(F=a(E,k),!o(F,E,I,P))throw Error(r(d,A));b[A]=F}}}if(N>O)throw Error(r(m,"there are arguments left but all parameters are processed."));return b},u})});