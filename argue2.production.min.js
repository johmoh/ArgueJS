/** @license MIT (http://opensource.org/licenses/MIT) */
if("function"!=typeof define)var define=require("amdefine")(module);define(function(){"use strict";return function(e){return e()}(function(){function e(e){return e instanceof Array}function n(e){return"function"==typeof e}function t(e){return e instanceof Object}function r(e){var n,t,r,i=e;if(i)for(n=arguments.length,t=1;n>t;++t)r=arguments[t],i=i.replace(RegExp("\\{"+t+"\\}","g"),r);return i}function i(e,n,t,r){return n===a.TAIL?!0:void 0===e?t===!0:null===e?r===!0:n===a.ANYTYPE?!0:m(e)===n||e instanceof n}function o(n,t,r,i){return t===a.TAIL?e(n):void 0===n?r===!0:null===n?i===!0:t===a.ANYTYPE?!0:m(n)===t||n instanceof t}function a(){}{var u=!1,f=!1,c=!0,l='parameter specification "{1}": ',s=l+"default value is not compatible to parameter type",d=l+'"{2}" is invalid.',p=l+'type specification contains unknown option "{2}".',v="Incompatible function call: ",g=v+'mandatory argument "{1}" has no value.',h=v+"too many arguments. {1}",m=(function(){var e=Object.prototype.toString.call(arguments);return function(n){return Object.prototype.toString.call(n)===e}}(),function(e){return void 0===e?void 0:null===e?null:e.constructor});!function(){var e=/^[_a-z$]{1}[_a-z0-9$]*$/i;return function(n){return n?e.test(n):!1}}()}return a.ANYTYPE=function(){},a.TAIL=function(){},a.getArguments=function(l,v){var m,y,b,w,A,E,T,Y,k,I,P,L,N,O,j,z,$,S,_,q,x;if(1===arguments.length){if(v=arguments[0],!v||v.length>0)throw Error(r(h,"no parameters defined but arguments given"));return{}}for(m=l.length,y={},b={},L=v.length,N=0,O=v[N],j=0;m>j;++j){z=l[j],w=void 0,A=void 0,E=void 0,T=void 0,Y=void 0,k=void 0,I=void 0,P=void 0;for($ in z)if(z.hasOwnProperty($))if(w=$,S=z[$],n(S))E=!1,A=S;else if(e(S))E=!0,A=S[0],S.length>=2&&(T=!0,Y=S[1]);else{if(!t(S))throw Error(r(d,w,"type"));for(_ in S)if(S.hasOwnProperty(_))switch(_){case"type":e(S.type)?(E=!0,A=S.type[0]):(E=!1,A=S.type);break;case"defaultValue":T=!0,E=!0,Y=S[_];break;case"allowUndefined":k=S[_];break;case"allowNull":I=S[_];break;case"parenthesizeTail":P=S[_];break;default:throw Error(r(p,w,_))}}if(A!==a.TAIL?(void 0===k&&(k=f),void 0===I&&(I=u)):void 0===P&&(P=c),L>N&&i(O,A,k,I)){if(A===a.TAIL){if(++N<L){q=[O];do q[q.length]=v[N];while(++N<L);y[w]=q}else y[w]=!e(O)||P?[O]:O;N=L;break}y[w]=O,++N,L>N&&(O=v[N])}else{if(!E)throw Error(r(g,w));if(T){if(x=A!==Function&&A!==a.ANYTYPE&&n(Y)?Y():Y,!o(x,A,k,I))throw Error(r(s,w));y[w]=x}}}if(L>N)throw Error(r(h,"there are arguments left but all parameters are processed."));return y},a})});