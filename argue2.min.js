/** @license MIT (http://opensource.org/licenses/MIT) */
!function(e,t,n){if("function"==typeof define&&"object"==typeof define.amd)define(n);else if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module)module.exports=n();else{if(void 0!==t[e])throw Error('cannot export module "'+e+'" in current namespace. name already in use.');t[e]=n()}}("arguejs",this,function(){"use strict";function e(e){return"boolean"==typeof e}function t(e){return e instanceof Array}function n(e){return"function"==typeof e}function r(e){return n(e)}function i(e){var t,n,r,i=e;if(i)for(t=arguments.length,n=1;t>n;++n)r=arguments[n],i=i.replace(RegExp("\\{"+n+"\\}","g"),r);return i}function a(e,t){return t.type===y.TAIL?!0:void 0===e?t.allowUndefined===!0:null===e?t.allowNull===!0:t.type===y.ANYTYPE?!0:R(e)===t.type||e instanceof t.type}function o(e,n){return n.type===y.TAIL?t(e):void 0===e?n.allowUndefined===!0:null===e?n.allowNull===!0:n.type===y.ANYTYPE?!0:R(e)===n.type||e instanceof n.type}function l(e){return n(e)}function f(e){return t(e)}function u(e){return R(e)===Object}function c(e){e.type===y.TAIL?void 0===e.parenthesizeTail&&(e.parenthesizeTail=v):(void 0===e.allowNull&&(e.allowNull=g),void 0===e.allowUndefined&&(e.allowUndefined=E))}function s(e,t,n){var r={idx:e,name:t,isOptional:!1,type:n};return c(r),r}function p(e,t,n){if(n.length<1)throw Error(i(x,t));var r={idx:e,name:t,isOptional:!0,type:n[0]};if(n.length>=2){if(n.length>2)throw Error(i(_,t));r.hasDefaultValue=!0,r.defaultValue=n[1]}else r.hasDefaultValue=!1;return c(r),r}function m(t,n,r){var a,o={idx:t,name:n};for(a in r)if(r.hasOwnProperty(a))switch(a){case"type":if(f(r.type)){if(r.type.length<1)throw Error(i(x,n));if(r.type.length>2)throw Error(i(_,n));o.isOptional=!0,o.type=r.type[0]}else o.isOptional=!1,o.type=r.type;break;case"defaultValue":o.hasDefaultValue=!0,o.isOptional=!0,o.defaultValue=r[a];break;case"allowUndefined":if(o.allowUndefined=r[a],!e(o.allowUndefined))throw Error(i(V,n,"allowUndefined","boolean"));break;case"allowNull":if(o.allowNull=r[a],!e(o.allowNull))throw Error(i(V,n,"allowNull","boolean"));break;case"parenthesizeTail":if(o.parenthesizeTail=r[a],!e(o.parenthesizeTail))throw Error(i(V,n,"parenthesizeTail","boolean"));break;default:throw Error(i(D,n,a))}return c(o),o}function h(e,t){var n,r,a;for(r in t)if(t.hasOwnProperty(r)){if(void 0!==n)throw Error(i(I,n.name));if(a=t[r],l(a))n=s(e,r,a);else if(f(a))n=p(e,r,a);else{if(!u(a))throw Error(i(j,r,"type"));n=m(e,r,a)}}return n}function d(e,t){if(!e.name)throw Error(i(k,e.idx));if(!B(e.name))throw Error(i(j,e.name,"name"));if(!r(e.type))throw Error(i(j,e.name,"type"));if(e.type!==y.TAIL){if(void 0!==e.parenthesizeTail)throw Error(i(P,e.name,"parenthesizeTail","only"))}else{if(void 0!==e.allowUndefined)throw Error(i(P,e.name,"allowUndefined","not"));if(void 0!==e.allowNull)throw Error(i(P,e.name,"allowNull","not"));if(e.idx!==t-1)throw Error(L)}}function w(e){var t;if(t=n(e.defaultValue)&&e.type!==Function&&e.type!==y.ANYTYPE?e.defaultValue():e.defaultValue,!o(t,e))throw Error(i(U,e.name));return t}function y(){}var g=!1,E=!1,v=!0,b="bad call: ",T=b+'type of "{1}" is invalid.',N=b+"no arguments. function call is not compatible with function specification.",A=b+"too many arguments. function call is not compatible with function specification.",O=b+"parameter specification #{1} is not an object structure.",z='parameter specification "{1}": ',U=z+"default value is not compatible to parameter type",V=z+'value of "{2}" has incorrect type (must be {3})',j=z+'"{2}" is invalid.',x=z+"type specification is missing.",Y=z+"parameter with same name already defined (conflicting position in function specification: #{2})",k="parameter specification: parameter #{1} has no name",I=z+"specification contains more than one element.",P=z+'"{2}" is {3} allowed for the tail-parameter in a variadic function',L="in a variadic function the tail-parameter must be the last parameter in the function specification.",_=z+"type specification has too many elements.",D=z+'type specification contains unknown option "{2}".',S="Incompatible function call: ",$=S+'mandatory argument "{1}" has no value.',q=S+"too many arguments. {1}",F=function(){var e=Object.prototype.toString.call(arguments);return function(t){return Object.prototype.toString.call(t)===e}}(),R=function(e){return void 0===e?void 0:null===e?null:e.constructor},B=function(){var e=/^[_a-z$]{1}[_a-z0-9$]*$/i;return function(t){return t?e.test(t):!1}}();return y.ANYTYPE=function(){},y.TAIL=function(){},y.getArguments=function(e,n){var r,o,l,f,u,c,s,p,m;if(1===arguments.length){if(!F(arguments[0])&&!t(arguments[0]))throw Error(i(T,"_arguments"));if(!arguments[0]||arguments[0].length>0)throw Error(i(q,"no parameters defined but arguments given"));return{}}if(2!==arguments.length)throw Error(arguments.length<1?N:A);if(!t(e))throw Error(i(T,"_functionSpecification"));if(!F(n)&&!t(n))throw Error(i(T,"_arguments"));for(r={},o={},l=e.length,f=n.length,u=0,c=n[u],s=0;l>s;++s){if(p=e[s],R(p)!==Object)throw Error(i(O,s));if(m=h(s,p),d(m,l),o.hasOwnProperty(m.name))throw Error(i(Y,m.name,s));if(o[m.name]=m,f>u&&a(c,m)){if(m.type===y.TAIL){r[m.name]=u!==f-1?Array.prototype.slice.call(n,u):!t(c)||m.parenthesizeTail?[c]:c,u=f;break}r[m.name]=c,++u,f>u&&(c=n[u])}else{if(!m.isOptional)throw Error(i($,m.name));m.hasDefaultValue&&(r[m.name]=w(m))}}if(f>u)throw Error(i(q,"there are arguments left but all parameters are processed."));return r},y});